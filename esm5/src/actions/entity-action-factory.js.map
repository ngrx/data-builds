{"version":3,"file":"entity-action-factory.js","sourceRoot":"ng://@ngrx/data/","sources":["src/actions/entity-action-factory.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAQ3C;IAAA;IA4EA,CAAC;IApDC,4CAA4C;;;;;;;;;;IAC5C,oCAAM;;;;;;;;;;IAAN,UACE,aAA8C,EAC9C,QAAmB,EACnB,IAAQ,EACR,OAA6B;;YAEvB,OAAO,GACX,OAAO,aAAa,KAAK,QAAQ;YAC/B,CAAC,CAAC,CAAC,yCACI,CAAC,OAAO,IAAI,EAAE,CAAC,KAClB,UAAU,EAAE,aAAa,EACzB,QAAQ,UAAA;gBACR,IAAI,MAAA,KACqB,CAAC;YAC9B,CAAC,CAAC,aAAa;QACnB,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IAClC,CAAC;IAED;;;;OAIG;;;;;;;;;IACO,wCAAU;;;;;;;;IAApB,UAA8B,OAA+B;QACnD,IAAA,+BAAU,EAAE,2BAAQ,EAAE,iBAAG;QACjC,IAAI,CAAC,UAAU,EAAE;YACf,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;SACvD;QACD,IAAI,QAAQ,IAAI,IAAI,EAAE;YACpB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;SACpD;;YACK,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,IAAI,UAAU,CAAC;QAC/D,OAAO,EAAE,IAAI,MAAA,EAAE,OAAO,SAAA,EAAE,CAAC;IAC3B,CAAC;IAED;;;;OAIG;;;;;;;;IACH,8CAAgB;;;;;;;IAAhB,UACE,IAAkB,EAClB,aAA8C;QAE9C,OAAO,IAAI,CAAC,MAAM,uBAAM,IAAI,CAAC,OAAO,GAAK,aAAa,EAAG,CAAC;IAC5D,CAAC;;;;;;IAED,8CAAgB;;;;;IAAhB,UAAiB,EAAU,EAAE,GAAW;QACtC,OAAO,MAAI,GAAG,UAAK,EAAI,CAAC;QACxB,sEAAsE;IACxE,CAAC;;gBA3EF,UAAU;;IA4EX,0BAAC;CAAA,AA5ED,IA4EC;SA3EY,mBAAmB","sourcesContent":["import { Injectable } from '@angular/core';\n\nimport { EntityOp } from './entity-op';\nimport {\n  EntityAction,\n  EntityActionOptions,\n  EntityActionPayload,\n} from './entity-action';\n@Injectable()\nexport class EntityActionFactory {\n  /**\n   * Create an EntityAction to perform an operation (op) for a particular entity type\n   * (entityName) with optional data and other optional flags\n   * @param entityName Name of the entity type\n   * @param entityOp Operation to perform (EntityOp)\n   * @param [data] data for the operation\n   * @param [options] additional options\n   */\n  create<P = any>(\n    entityName: string,\n    entityOp: EntityOp,\n    data?: P,\n    options?: EntityActionOptions\n  ): EntityAction<P>;\n\n  /**\n   * Create an EntityAction to perform an operation (op) for a particular entity type\n   * (entityName) with optional data and other optional flags\n   * @param payload Defines the EntityAction and its options\n   */\n  create<P = any>(payload: EntityActionPayload<P>): EntityAction<P>;\n\n  // polymorphic create for the two signatures\n  create<P = any>(\n    nameOrPayload: EntityActionPayload<P> | string,\n    entityOp?: EntityOp,\n    data?: P,\n    options?: EntityActionOptions\n  ): EntityAction<P> {\n    const payload: EntityActionPayload<P> =\n      typeof nameOrPayload === 'string'\n        ? ({\n            ...(options || {}),\n            entityName: nameOrPayload,\n            entityOp,\n            data,\n          } as EntityActionPayload<P>)\n        : nameOrPayload;\n    return this.createCore(payload);\n  }\n\n  /**\n   * Create an EntityAction to perform an operation (op) for a particular entity type\n   * (entityName) with optional data and other optional flags\n   * @param payload Defines the EntityAction and its options\n   */\n  protected createCore<P = any>(payload: EntityActionPayload<P>) {\n    const { entityName, entityOp, tag } = payload;\n    if (!entityName) {\n      throw new Error('Missing entity name for new action');\n    }\n    if (entityOp == null) {\n      throw new Error('Missing EntityOp for new action');\n    }\n    const type = this.formatActionType(entityOp, tag || entityName);\n    return { type, payload };\n  }\n\n  /**\n   * Create an EntityAction from another EntityAction, replacing properties with those from newPayload;\n   * @param from Source action that is the base for the new action\n   * @param newProperties New EntityAction properties that replace the source action properties\n   */\n  createFromAction<P = any>(\n    from: EntityAction,\n    newProperties: Partial<EntityActionPayload<P>>\n  ): EntityAction<P> {\n    return this.create({ ...from.payload, ...newProperties });\n  }\n\n  formatActionType(op: string, tag: string) {\n    return `[${tag}] ${op}`;\n    // return `${op} [${tag}]`.toUpperCase(); // example of an alternative\n  }\n}\n"]}