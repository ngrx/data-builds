{"version":3,"file":"entity-collection-creator.js","sourceRoot":"ng://@ngrx/data/","sources":["src/reducers/entity-collection-creator.ts"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AAGrD,OAAO,EAAE,uBAAuB,EAAE,MAAM,8CAA8C,CAAC;AAGvF,MAAM,OAAO,uBAAuB;;;;IAClC,YACsB,uBAAiD;QAAjD,4BAAuB,GAAvB,uBAAuB,CAA0B;IACpE,CAAC;;;;;;;IAMJ,MAAM,CACJ,UAAkB;;cAEZ,GAAG,GACP,IAAI,CAAC,uBAAuB;YAC5B,IAAI,CAAC,uBAAuB,CAAC,aAAa,CACxC,UAAU,EACV,KAAK,CAAC,eAAe,CACtB;;cAEG,YAAY,GAAG,GAAG,IAAI,GAAG,CAAC,YAAY;QAE5C,OAAO,mBAAG,CAAC,YAAY,IAAI,2BAA2B,CAAI,UAAU,CAAC,CAAC,EAAA,CAAC;IACzE,CAAC;;;YAvBF,UAAU;;;;YAFF,uBAAuB,uBAK3B,QAAQ;;;;;;;IAAT,0DAAqE;;;;;;;AAuBzE,MAAM,UAAU,2BAA2B,CACzC,UAAmB;IAEnB,OAAO,mBAAA;QACL,UAAU;QACV,GAAG,EAAE,EAAE;QACP,QAAQ,EAAE,EAAE;QACZ,MAAM,EAAE,SAAS;QACjB,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,KAAK;QACd,WAAW,EAAE,EAAE;KAChB,EAAuB,CAAC;AAC3B,CAAC","sourcesContent":["import { Injectable, Optional } from '@angular/core';\n\nimport { EntityCollection } from './entity-collection';\nimport { EntityDefinitionService } from '../entity-metadata/entity-definition.service';\n\n@Injectable()\nexport class EntityCollectionCreator {\n  constructor(\n    @Optional() private entityDefinitionService?: EntityDefinitionService\n  ) {}\n\n  /**\n   * Create the default collection for an entity type.\n   * @param entityName {string} entity type name\n   */\n  create<T = any, S extends EntityCollection<T> = EntityCollection<T>>(\n    entityName: string\n  ): S {\n    const def =\n      this.entityDefinitionService &&\n      this.entityDefinitionService.getDefinition<T>(\n        entityName,\n        false /*shouldThrow*/\n      );\n\n    const initialState = def && def.initialState;\n\n    return <S>(initialState || createEmptyEntityCollection<T>(entityName));\n  }\n}\n\nexport function createEmptyEntityCollection<T>(\n  entityName?: string\n): EntityCollection<T> {\n  return {\n    entityName,\n    ids: [],\n    entities: {},\n    filter: undefined,\n    loaded: false,\n    loading: false,\n    changeState: {},\n  } as EntityCollection<T>;\n}\n"]}